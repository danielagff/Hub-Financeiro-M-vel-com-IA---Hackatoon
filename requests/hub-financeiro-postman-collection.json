{
  "info": {
    "_postman_id": "b9a1f8a2-0000-4000-8000-000000000001",
    "name": "Hub Financeiro - Test Flow",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": "Collection to test user flows, PIX keys and transactions"
  },
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:3000" },
    { "key": "userId", "value": "" },
    { "key": "transactionId", "value": "" }
  ],
  "item": [
    {
      "name": "Create user (with PIX keys)",
      "request": {
        "method": "POST",
        "header": [ { "key": "Content-Type", "value": "application/json" } ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"name\": \"Alice Example\",\n  \"email\": \"alice@example.com\",\n  \"password\": \"secret123\",\n  \"pixKeys\": [\n    { \"type\": \"EMAIL\", \"key\": \"alice@example.com\" },\n    { \"type\": \"CPF\", \"key\": \"12345678900\" }\n  ]\n}"
        },
        "url": { "raw": "{{baseUrl}}/users", "host": ["{{baseUrl}}"], "path": ["users"] }
      }
    },
    {
      "name": "Get user by id",
      "request": {
        "method": "GET",
        "url": { "raw": "{{baseUrl}}/users/{{userId}}", "host": ["{{baseUrl}}"], "path": ["users","{{userId}}"] }
      }
    },
    {
      "name": "Get user by PIX key",
      "request": {
        "method": "GET",
        "url": { "raw": "{{baseUrl}}/users/pix/alice%40example.com", "host": ["{{baseUrl}}"], "path": ["users","pix","alice%40example.com"] }
      }
    },
    {
      "name": "Add PIX key to user",
      "request": {
        "method": "POST",
        "header": [ { "key": "Content-Type", "value": "application/json" } ],
        "body": { "mode": "raw", "raw": "{ \"type\": \"PHONE\", \"key\": \"+5511999000111\" }" },
        "url": { "raw": "{{baseUrl}}/users/{{userId}}/pix", "host": ["{{baseUrl}}"], "path": ["users","{{userId}}","pix"] }
      }
    },
    {
      "name": "List user's transactions",
      "request": {
        "method": "GET",
        "url": { "raw": "{{baseUrl}}/transactions/user/{{userId}}", "host": ["{{baseUrl}}"], "path": ["transactions","user","{{userId}}"] }
      }
    },
    {
      "name": "Create a transaction",
      "request": {
        "method": "POST",
        "header": [ { "key": "Content-Type", "value": "application/json" } ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"type\": \"CREDIT\",\n  \"date\": \"2025-11-27T12:00:00Z\",\n  \"amount\": 1500.5,\n  \"details\": \"Salary\",\n  \"userId\": {{userId}},\n  \"category\": \"OTHER\"\n}"
        },
        "url": { "raw": "{{baseUrl}}/transactions", "host": ["{{baseUrl}}"], "path": ["transactions"] }
      }
    },
    {
      "name": "Update a transaction",
      "request": {
        "method": "PUT",
        "header": [ { "key": "Content-Type", "value": "application/json" } ],
        "body": { "mode": "raw", "raw": "{ \"details\": \"Partial bonus\", \"amount\": 1750.75 }" },
        "url": { "raw": "{{baseUrl}}/transactions/{{transactionId}}", "host": ["{{baseUrl}}"], "path": ["transactions","{{transactionId}}"] }
      }
    },
    {
      "name": "Delete a transaction",
      "request": {
        "method": "DELETE",
        "url": { "raw": "{{baseUrl}}/transactions/{{transactionId}}", "host": ["{{baseUrl}}"], "path": ["transactions","{{transactionId}}"] }
      }
    },
    {
      "name": "Remove PIX key",
      "request": {
        "method": "DELETE",
        "url": { "raw": "{{baseUrl}}/users/{{userId}}/pix/%2B5511999000111", "host": ["{{baseUrl}}"], "path": ["users","{{userId}}","pix","%2B5511999000111"] }
      }
    },
    {
      "name": "Delete user",
      "request": {
        "method": "DELETE",
        "url": { "raw": "{{baseUrl}}/users/{{userId}}", "host": ["{{baseUrl}}"], "path": ["users","{{userId}}"] }
      }
    }
  ]
}
